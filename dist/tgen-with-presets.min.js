/**
 * seamless-texture-generator - Seamless texture generator
 * 
 * @version v1.3.1
 * @link https://github.com/schalkt/tgen/
 * @license MIT
 */
var SeamlessTextureGenerator={version:"1.3.1",defaults:{},effects:{},filters:[],presets:{},functions:[],blends:{},shapes:{},colormaps:{},events:{beforeEffect:{},afterEffect:{},beforeRender:{},afterRender:{}},config:{historyLast:0,historyName:"history",historyList:[]},blendSafe:["average","lighten","linearburn","linearlight","difference","difference-invert","screen","lineardodge","lineardodge-invert","opacity","exclusion"],blendFlat:["lighten","screen","opacity"],effect:function(e,r,t){this.defaults[e]=r,this.effects[e]=t},function:function(e,r,t){this.functions.push(e),this.defaults[e]=r,this.effects[e]=t},filter:function(e,r,t){this.filters.push(e),this.defaults[e]=r,this.effects[e]=t},preset:function(e,r){r.name=e,this.presets[e]=r},event:function(e,r,t){null!=this.events[e]&&(this.events[e][r]=t)},blend:function(e,r){this.blends[e]=r},shape:function(e,r){this.shapes[e]=r},colormap:function(e,r){this.colormaps[e]=r},init:function(e,r,t){return this.getGenerator(e,r,t)}};"undefined"!=typeof module&&void 0!==module.exports?module.exports=SeamlessTextureGenerator:"function"==typeof define&&define.amd?define([],function(){return SeamlessTextureGenerator}):window.tgen=SeamlessTextureGenerator,SeamlessTextureGenerator.effect("checkerboard",{blend:SeamlessTextureGenerator.blendFlat,rgba:"randomalpha",even:"random",size:[[2,32],[2,32]]},function(a,e){e.even=a.randItemByArraySeed(e.even,[!0,!1]);var r,t,s=a.texture.width,i=a.texture.height;"number"==typeof e.size?r=t=e.size:(r=e.size[0]=a.randByArraySeed(e.size[0],null,!0),t=e.size[1]=a.randByArraySeed(e.size[1],null,!0));function n(e,r){for(var t=0;t<o;t++)for(var n=0;n<l;n++)t+e<s&&n+r<i&&a.point.set(t+e,n+r)}for(var o=s/r,l=i/t,d=0;d<r;d++)if(d%2==0)for(var c=0;c<t;c++)n(c%2==0?d*o:d*o+o,c*l);return e}),SeamlessTextureGenerator.effect("circles",{blend:SeamlessTextureGenerator.blendFlat,rgba:"randomalpha",origin:"random",count:[1,42],size:[[1,42],[1,42]],seed:[1,Number.MAX_SAFE_INTEGER]},function(e,r){r.size[0]=e.randByArraySeed(r.size[0],!1),r.size[1]=e.randByArraySeed(r.size[1],!1);for(var t=0;t<r.count;t++){var n=e.xysize(t,r);e.shape.circle(e,e.percentX(n.x),e.percentY(n.y),e.percentXY(n.size),!0)}return r}),SeamlessTextureGenerator.effect("clouds",{blend:SeamlessTextureGenerator.blendSafe,rgba:"randomalpha",seed:[1,Number.MAX_SAFE_INTEGER],roughness:[1,32],colormap:null},function(p,m){m.roughness=p.randByArraySeed(m.roughness);function f(e,r,t){return e=Math.round(e),r=Math.round(r),e<0&&(e=g+e),g<=e&&(e-=g),r<0&&(r=y+r),y<=r&&(r-=y),void 0!==t&&(n[e][r]=t),n[e][r]}function b(e){return(p.randRealSeed(0,1)-.5)*(e/(g+g)*m.roughness)}var g=p.texture.width,y=p.texture.height,n=[],x=function(e){var r=e/2;if(r<=1)return m;for(var t=0;t<=g+r;t+=r)for(var n=0;n<=y+r;n+=r){var a=f(t-r,n-r),s=f(t,n-r),i=f(t-r,n),o=f(t,n),l=t-r/2,d=n-r/2,c=f(l,d,p.calc.normalize1((a+s+i+o)/4+b(e))),u=t-e+r/2;f(t-r,d,p.calc.normalize1((a+i+c+f(u,d))/4+b(e)));var h=n-e+r/2;f(l,n-r,p.calc.normalize1((a+s+c+f(l,h))/4+b(e)))}x(r)};!function(){for(var e=0;e<=g;e++){n[e]=[];for(var r=0;r<=y;r++)n[e][r]=0}}(),x(g),p.colormap.init(m.colormap,255,function(e){m.colormap=e});for(var e=0;e<g;e++)for(var r=0;r<y;r++){var t=parseInt(255*n[e][r],10);null!==p.colormap.data?p.point.rgba=p.colormap.get(t,m.rgba):p.point.rgba=p.point.colorize(m.rgba,[t,t,t,255]),p.point.set(e,r)}return m}),SeamlessTextureGenerator.effect("colorbar",{type:"random",colormap:"random",mirror:!0},function(e,r){r.type=e.randItemByArraySeed(r.type,["vertical","horizontal"]);var t,n,a,s=e.texture.width,i=e.texture.height,o="horizontal"==r.type?s:i;if(e.colormap.init(r.colormap,o,function(e){r.colormap=e}),"horizontal"==r.type)for(t=0;t<s;t++)for(r.mirror?(a=t<s/2?2*t:2*s-2*t,e.point.rgba=e.colormap.get(a)):e.point.rgba=e.colormap.get(t),n=0;n<i;n++)e.point.set(t,n);else for(n=0;n<i;n++)for(r.mirror?(a=n<i/2?2*n:2*i-2*n,e.point.rgba=e.colormap.get(a)):e.point.rgba=e.colormap.get(n),t=0;t<s;t++)e.point.set(t,n);return r}),SeamlessTextureGenerator.effect("crosshatch",{blend:SeamlessTextureGenerator.blendSafe,rgba:"randomalpha",level:[1,100],xadjust:"random",yadjust:"random"},function(e,r){r.xadjust=e.randRealByArraySeed(r.xadjust,[.1,121]),r.yadjust=e.randRealByArraySeed(r.yadjust,[.1,121]);for(var t=0;t<e.texture.width;t++)for(var n=0;n<e.texture.height;n++){var a=127+63.5*Math.sin(t*t/r.xadjust)+63.5*Math.cos(n*n/r.yadjust);e.point.rgba=e.point.colorize([a,a,a,255],r.rgba,r.level),e.point.set(t,n)}return r}),SeamlessTextureGenerator.effect("dots",{blend:"opacity",gridX:[2,64],gridY:[2,64],size:[1,250],seed:[1,Number.MAX_SAFE_INTEGER],rgba:"randomalpha",shape:"sphere",dynamic:!0,xsines:[1,16],ysines:[1,16]},function(e,r){r.gridX=e.randByArraySeed(r.gridX),r.gridY=e.randByArraySeed(r.gridY),r.xsines=e.randIntByArraySeed(r.xsines,[1,16]),r.ysines=e.randIntByArraySeed(r.ysines,[1,16]),r.shape=e.randItemByArraySeed(r.shape,["sphere","pyramid","rect","circle"]);for(var t=e.randByArraySeed(r.size)/100,n=e.texture.width,a=e.texture.height,s=n/r.gridX,i=a/r.gridY,o=s/2,l=i/2,d=1;d<=r.gridX;d++)for(var c=1;c<=r.gridY;c++){var u=t*(s+i)/2/2,h=u-u/2*Math.sin(d/r.gridX*r.xsines*2*e.calc.pi)+u/2*Math.sin(c/r.gridY*r.ysines*2*e.calc.pi);switch(r.shape){case"sphere":e.shape.sphere(e,d*s-o,c*i-l,2*h,!0,r.rgba,r.dynamic);break;case"pyramid":e.shape.pyramid(e,d*s-o,c*i-l,h,h,!0,r.rgba,r.dynamic);break;case"rect":e.shape.rect(e,d*s-o,c*i-l,h,h,!0,r.rgba,r.dynamic);break;default:h/=2,e.shape.circle(e,d*s-o,c*i-l,h,!0)}}return r}),SeamlessTextureGenerator.effect("fill",{blend:"",rgba:"randomalpha"},function(e,r){return e.shape.rect(e,1,1,e.texture.width,e.texture.height),r}),SeamlessTextureGenerator.effect("mandelbrot",{blend:"opacity",rgba:"randomalpha",seed:[1,Number.MAX_SAFE_INTEGER],iteration:[8,512],skip:[0,8]},function(e,r){r.skip=e.randByArraySeed(r.skip),r.iteration=e.randByArraySeed(r.iteration);for(var t,n,a,s,i=e.texture.width,o=e.texture.height,l=r.rgba[0],d=r.rgba[1],c=r.rgba[2],u=256/l,h=256/d,p=256/c,m=r.iteration,f=0,b=0,g=0;g<o;g++){n=3*g/o-1.5;for(var y=0;y<i;y++){f=t=3*y/i-2,b=n;for(var x=0;x<m&&!(4<(a=f*f)+(s=b*b));x++)b=2*f*b+n,f=a-s+t;x>r.skip&&(e.point.rgba=[x%l*u,x%d*h,x%c*p,e.point.rgba[3]],e.point.set(y,g))}}return r}),SeamlessTextureGenerator.effect("lines",{blend:SeamlessTextureGenerator.blendFlat,rgba:"randomalpha",size:[77,221],count:[21,512],freq1s:[4,221],freq1c:[4,221],freq2s:[4,221],freq2c:[4,221]},function(e,r){r.freq1s=e.randByArraySeed(r.freq1s,!0),r.freq1c=e.randByArraySeed(r.freq1c,!0),r.freq2s=e.randByArraySeed(r.freq2s,!0),r.freq2c=e.randByArraySeed(r.freq2c,!0),r.size=e.randByArraySeed(r.size);for(var t=0;t<r.count;t++){var n=e.texture.width/2+Math.sin(t/r.freq1s*e.calc.pi)*r.size,a=e.texture.height/2+Math.cos(t/r.freq1c*e.calc.pi)*r.size,s=e.texture.width/2+Math.sin(t/r.freq2s*e.calc.pi)*r.size,i=e.texture.height/2+Math.cos(t/r.freq2c*e.calc.pi)*r.size;e.shape.line(e,n,a,s,i)}return r}),SeamlessTextureGenerator.effect("lines2",{blend:SeamlessTextureGenerator.blendFlat,rgba:"randomalpha",type:"random",size:[.1,21],count:[1,42],seed:[1,Number.MAX_SAFE_INTEGER]},function(e,r){var t,n,a;for(r.type=e.randItemByArraySeed(r.type,["vertical","horizontal"]),a=0;a<r.count;a++)t=e.randByArraySeed(r.size,!0),n=e.randRealSeed(.1,100),"vertical"==r.type?e.shape.rect(e,e.percentX(n),0,e.percentX(t),e.texture.height):e.shape.rect(e,0,e.percentX(n),e.texture.width,e.percentX(t));return r}),SeamlessTextureGenerator.effect("noise",{blend:"lighten",mode:"monochrome",channels:[255,255,255],opacity:128,seed:[1,Number.MAX_SAFE_INTEGER]},function(t,n){switch(n.mode){case"color":t.walk(function(e){return[n.channels[0]?t.randIntSeed(0,n.channels[0]):0,n.channels[1]?t.randIntSeed(0,n.channels[1]):0,n.channels[2]?t.randIntSeed(0,n.channels[2]):0,n.opacity]});break;case"monochrome":t.walk(function(e){var r=t.randIntSeed(0,255);return[r,r,r,n.opacity]});break;case"colorize":t.walk(function(e){var r=t.randIntSeed(0,255);return t.point.colorize([r,r,r,n.opacity],n.rgba)})}return n}),SeamlessTextureGenerator.effect("pyramids",{blend:SeamlessTextureGenerator.blendSafe,rgba:"randomalpha",origin:"random",dynamic:"random",count:[1,77],size:[[1,92],[1,92]],seed:[1,Number.MAX_SAFE_INTEGER]},function(e,r){r.dynamic=e.randItemByArraySeed(r.dynamic,[!0,!1]),r.size[0]=e.randByArraySeed(r.size[0],!1),r.size[1]=e.randByArraySeed(r.size[1],!1);for(var t=0;t<r.count;t++){var n=e.xysize(t,r);e.shape.pyramid(e,e.percentX(n.x),e.percentY(n.y),e.percentXY(n.size),e.percentXY(n.size),!0,r.rgba,r.dynamic)}return r}),SeamlessTextureGenerator.effect("spheres",{blend:SeamlessTextureGenerator.blendSafe,rgba:"randomalpha",origin:"random",dynamic:!0,count:[1,77],size:[[1,92],[1,92]],seed:[1,Number.MAX_SAFE_INTEGER]},function(e,r){r.dynamic=e.randItemByArraySeed(r.dynamic,[!0,!1]),r.size[0]=e.randByArraySeed(r.size[0],!1),r.size[1]=e.randByArraySeed(r.size[1],!1);for(var t=0;t<r.count;t++){var n=e.xysize(t,r);e.shape.sphere(e,e.percentX(n.x),e.percentY(n.y),e.percentXY(n.size),!0,r.rgba,r.dynamic)}return r}),SeamlessTextureGenerator.effect("squares",{blend:SeamlessTextureGenerator.blendFlat,rgba:"randomalpha",origin:"random",count:[1,42],size:[[1,77],[1,77]],seed:[1,Number.MAX_SAFE_INTEGER]},function(e,r){r.size[0]=e.randByArraySeed(r.size[0],!1),r.size[1]=e.randByArraySeed(r.size[1],!1);for(var t=0;t<r.count;t++){var n=e.xysize(t,r);e.shape.rect(e,e.percentX(n.x),e.percentY(n.y),e.percentXY(n.size),e.percentXY(n.size),!1)}return r}),SeamlessTextureGenerator.effect("subplasma",{seed:[1,Number.MAX_SAFE_INTEGER],size:[1,7],rgba:"randomalpha"},function(e,r){r.size=e.randByArraySeed(r.size);var t,n,a,s,i=1<<r.size,o=e.texture.width,l=o,d=[];o<i&&(i=o);for(var c=o/i,u=0;u<i;u++)for(t=0;t<i;t++)d[t*c+u*c*o]=e.randRealSeed(0,1);for(u=0;u<i;u++)for(t=0;t<o;t++)n=t&~(c-1),d[t+(a=u*c*o)]=e.calc.interpolate.catmullrom(d[(n-c&o-1)+a],d[(n-0*c&o-1)+a],d[(n+c&o-1)+a],d[(n+2*c&o-1)+a],t%c,c);for(u=0;u<l;u++)for(t=0;t<o;t++)n=u&~(c-1),d[t+u*o]=e.calc.interpolate.catmullrom(d[t+(n-c&l-1)*o],d[t+(n-0*c&l-1)*o],d[t+(n+c&l-1)*o],d[t+(n+2*c&l-1)*o],u%c,c);for(t=0;t<e.texture.width;t++)for(u=0;u<e.texture.height;u++)s=255*d[t+u*o],e.point.rgba=e.point.colorize(r.rgba,[s,s,s,255]),e.point.set(t,u);return r}),SeamlessTextureGenerator.effect("waves",{blend:SeamlessTextureGenerator.blendSafe,rgba:"randomalpha",level:[1,100],xsines:[1,14],ysines:[1,14]},function(e,r){r.xsines=e.randIntByArraySeed(r.xsines,[1,16]),r.ysines=e.randIntByArraySeed(r.ysines,[1,16]);for(var t=0;t<e.texture.width;t++)for(var n=0;n<e.texture.height;n++){var a=127+63.5*Math.sin(t/e.texture.width*r.xsines*2*e.calc.pi)+63.5*Math.sin(n/e.texture.height*r.ysines*2*e.calc.pi);"object"==typeof r.channels?e.point.rgba=[r.channels[0]?a:0,r.channels[1]?a:0,r.channels[2]?a:0,r.channels[3]?a:0]:e.point.rgba=e.point.colorize([a,a,a,255],r.rgba,r.level),e.point.set(t,n)}return r}),SeamlessTextureGenerator.effect("xor",{blend:"",rgba:"randomalpha",level:[1,100],zoom:[.1,77]},function(e,r){var t=e.texture.width,n=e.texture.height;r.zoom=e.randIntByArraySeed(r.zoom,[1,10]);for(var a=0;a<t;a++)for(var s=0;s<n;s++){var i=a*r.zoom^s*r.zoom;e.point.rgba=e.point.colorize([i,i,i,255],r.rgba,r.level),e.point.set(a,s)}return r}),SeamlessTextureGenerator.filter("backlight",{channels:[1,1,1]},function(e,r){return e.walk(function(e){return[r.channels[0]?255/e[0]*(255/e[0]):e[0],r.channels[1]?255/e[1]*(255/e[1]):e[1],r.channels[2]?255/e[2]*(255/e[2]):e[2],e[3]]}),r}),SeamlessTextureGenerator.filter("blur",{},function(e,r){return e.do("convolute",{store:!1,transparent:!1,weights:[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9]}),r}),SeamlessTextureGenerator.filter("brightness",{adjust:50,legacy:!0},function(e,r){return!0===r.legacy?e.walk(function(e){return[Math.min(e[0]+r.adjust,255),Math.min(e[1]+r.adjust,255),Math.min(e[2]+r.adjust,255),e[3]]}):e.walk(function(e){return[e[0]=Math.min(255/e[0]*(r.adjust/255),255),e[1]=Math.min(255/e[1]*(r.adjust/255),255),e[2]=Math.min(255/e[2]*(r.adjust/255),255),e[3]]}),r}),SeamlessTextureGenerator.filter("channel",{channels:[[.2,.8],[.4,1],[.8,1.2]]},function(e,r){return r.channels[0]=e.randByArray(r.channels[0],!0),r.channels[1]=e.randByArray(r.channels[1],!0),r.channels[2]=e.randByArray(r.channels[2],!0),e.walk(function(e){return[e[0]*r.channels[0],e[1]*r.channels[1],e[2]*r.channels[2],e[3]]}),r}),SeamlessTextureGenerator.filter("colorize",{level:50,rgba:"random",colormap:null},function(n,a){return n.colormap.init(a.colormap,255,function(e){a.colormap=e}),n.walk(function(e){if(n.colormap.data){var r=(e[0]+e[1]+e[2])/3,t=n.colormap.get(r,a.rgba);return t[3]=e[3],t}return n.point.colorize(e,a.rgba,a.level)}),a}),SeamlessTextureGenerator.filter("contrast",{adjust:50},function(e,r){var t=(100+r.adjust)/100;return e.walk(function(e){return e[0]=255*((e[0]/255-.5)*t+.5),e[1]=255*((e[1]/255-.5)*t+.5),e[2]=255*((e[2]/255-.5)*t+.5),[Math.max(Math.min(e[0],255),0),Math.max(Math.min(e[1],255),0),Math.max(Math.min(e[2],255),0),e[3]]}),r}),SeamlessTextureGenerator.filter("convolute",{blend:"opacity",transparent:!1,weights:"default1"},function(e,r){if("object"!=typeof r.weights&&"string"!=typeof r.weights||null==r.weights)return r;if("string"==typeof r.weights[0]&&(r.weights=e.randByArray(r.weights)),"string"==typeof r.weights)if("random"===r.weights){var t=-32;r.weights=[e.randIntSeed(t,32),e.randIntSeed(t,32),e.randIntSeed(t,32),e.randIntSeed(t,32),e.randIntSeed(t,32),e.randIntSeed(t,32),e.randIntSeed(t,32),e.randIntSeed(t,32),e.randIntSeed(t,32),e.randIntSeed(t,32),e.randIntSeed(t,32),e.randIntSeed(t,32)],e.log(r.weights.join(", "))}else{var n={edgedetect1:[-1,-1,-1,-1,8,-1,-1,-1,-1],edgedetect2:[0,1,0,1,-4,1,0,1,0],edgedetect3:[1,0,-1,0,0,0,-1,0,1],sharpen1:[0,-1,0,-1,5,-1,0,-1,0],sharpen2:[-1,-1,-1,-1,9,-1,-1,-1,-1],emboss1:[1,1,1,1,.7,-1,-1,-1,-1],emboss2:[-2,-1,0,-1,1,1,0,1,2],emboss3:[10,3,-2,-8,-5,7,-3,-12,11],emboss4:[-6,11,-9,-9,0,-4,12,8,-2],sobel1:[-1,-2,-1,0,0,0,1,2,1],sobel2:[-1,0,1,-2,0,2,-1,0,1],sobel3:[-5,-8,12,-4,-8,-12,9,6,9],default1:[1,-11,-7,5,2,4,4,9,-2],default2:[-5,-21,25,22,31,-16,-2,-21,-10],default3:[1,1,1,1,1,1,1,1,1]};if(null==n[r.weights])return r;r.weights=n[r.weights]}var a=new e.buffer;a.clear();for(var s=Math.round(Math.sqrt(r.weights.length)),i=Math.floor(s/2),o=r.transparent?1:0,l=0;l<e.texture.height;l++)for(var d=0;d<e.texture.width;d++){for(var c=0,u=0,h=0,p=0,m=0;m<s;m++)for(var f=0;f<s;f++){var b=r.weights[m*s+f],g=l+m-i,y=d+f-i,x=e.texture.get(y,g);c+=x[0]*b,u+=x[1]*b,h+=x[2]*b,p+=x[3]}a.set(d,l,[c,u,h,p+o*(255-p)])}for(var v=e.texture.size();v--;)e.texture.data[v]=a.data[v];return r}),SeamlessTextureGenerator.filter("edgedetect",{type:1},function(e,r){return e.do("convolute",{store:!1,transparent:!1,weights:"edgedetect"+r.type}),r}),SeamlessTextureGenerator.filter("emboss",{type:2},function(e,r){return e.do("convolute",{store:!1,transparent:!1,weights:"emboss"+r.type}),r}),SeamlessTextureGenerator.filter("gamma",{adjust:.5},function(e,r){return e.walk(function(e){return e[0]=255*Math.pow(e[0]/255,1/r.adjust),e[1]=255*Math.pow(e[1]/255,1/r.adjust),e[2]=255*Math.pow(e[2]/255,1/r.adjust),[e[0],e[1],e[2],e[3]]}),r}),SeamlessTextureGenerator.filter("grayscale",{method:["ligthness","average","luminosity"]},function(t,e){switch("string"==typeof e&&(e={method:e}),"object"==typeof e.method&&(e.method=t.randItemSeed(e.method)),e.method){case"ligthness":t.walk(function(e){var r=Math.max(e[0],e[1],e[2])+Math.min(e[0],e[1],e[2]);return[r,r,r,e[3]]});break;case"average":t.walk(function(e){var r=(e[0]+e[1]+e[2])/3;return[r,r,r,e[3]]});break;case"luminosity":t.walk(function(e){var r=t.calc.luminance(e);return[r,r,r,e[3]]})}return e}),SeamlessTextureGenerator.filter("invert",{channels:[1,1,1]},function(e,r){return e.walk(function(e){return[r.channels[0]?255-e[0]:e[0],r.channels[1]?255-e[1]:e[1],r.channels[2]?255-e[2]:e[2],e[3]]}),r}),SeamlessTextureGenerator.filter("opacity",{adjust:128},function(e,r){return e.walk(function(e){return e[3]=r.adjust,e}),r}),SeamlessTextureGenerator.filter("sharpen",{type:2},function(e,r){return e.do("convolute",{store:!1,transparent:!1,weights:"sharpen"+r.type}),r}),SeamlessTextureGenerator.filter("sinecolor",{sines:[1,7],channel:[0,2]},function(t,n){return n.sines=t.randByArray(n.sines),n.channel=t.randByArray(n.channel),t.walk(function(e){var r=parseInt(255*Math.sin(e[n.channel]*(t.calc.pi/180)*(255/360)*n.sines));return e[n.channel]=Math.abs(r),e}),n}),SeamlessTextureGenerator.filter("sobel",{type:3},function(e,r){return e.do("convolute",{store:!1,transparent:!1,weights:"sobel"+r.type}),r}),SeamlessTextureGenerator.filter("threshold",{adjust:[64,128]},function(e,t){return t.adjust=e.randByArray(t.adjust),e.walk(function(e){var r=.2126*e[0]+.7152*e[1]+.0722*e[2]<=t.adjust?0:255;return[r,r,r,e[3]]}),t}),SeamlessTextureGenerator.filter("vibrance",{adjust:128},function(e,r){var a=-1*r.adjust;return e.walk(function(e){var r=(e[0]+e[1]+e[2])/3,t=Math.max(e[0],e[1],e[2]),n=2*Math.abs(t-r)/255*a/100;return e[0]!==t&&(e[0]+=(t-e[0])*n),e[1]!==t&&(e[1]+=(t-e[1])*n),e[2]!==t&&(e[2]+=(t-e[2])*n),[e[0],e[1],e[2],e[3]]}),r}),SeamlessTextureGenerator.preset("backlights",{width:256,height:256,items:[[0,"spheres",{count:[4,42],size:[4,77],rgba:[[94,240],[94,240],[94,240],1]}],[1,"spheres",{count:[4,42],size:[4,77],rgba:[[94,240],[94,240],[94,240],1]}],[2,"copy",0],[2,"merge",{layer:1,blend:"backlight"}]]}),SeamlessTextureGenerator.preset("bubbles",{width:256,height:256,items:[[0,"circles",{blend:"opacity",rgba:[[32,255],[32,255],[32,255],[32,200]],count:[32,48],size:[1,5]}],[0,"circles",{blend:"opacity",rgba:[[32,255],[32,255],[32,255],[32,200]],count:[15,20],size:[10,15]}],[0,"circles",{blend:"opacity",rgba:[[32,255],[32,255],[32,255],[32,200]],count:[2,3],size:[20,25]}],[0,"spheres",{blend:"softlight",dynamic:!0}],[0,"circles",{blend:"softlight",opacity:128}],[0,"noise",{blend:"softlight",opacity:32}]]}),SeamlessTextureGenerator.preset("cells",{width:256,height:256,items:[[0,"spheres",{blend:"lighten",count:21,rgba:[255,255,255,1]}],[0,"invert"],[1,"spheres",{blend:"lighten",count:21,rgba:[155,155,155,1]}],[1,"invert"],[1,"merge",{layer:0,blend:["overlay","lighten","difference"]}],[1,"colorize"],[1,"brightness",{adjust:-10,legacy:!0}],[1,"vibrance",{adjust:50}],[1,"contrast",{adjust:50}]]}),SeamlessTextureGenerator.preset("checkerboards-multiply",{width:256,height:256,items:[[0,"checkerboard",{size:[[16,21],[16,21]],rgba:"randomalpha",blend:""}],[0,"checkerboard",{size:[[5,16],[5,16]],rgba:"randomalpha",blend:"multiply"}],[0,"checkerboard",{size:[[2,4],[2,4]],rgba:"randomalpha",blend:"multiply"}],[0,"sharpen",{type:2}],[0,"spheres",{blend:"multiply",dynamic:!0,opacity:255}]]}),SeamlessTextureGenerator.preset("checkerboards",{width:256,height:256,items:[[0,"checkerboard",{size:32,rgba:"randomalpha",blend:""}],[0,"checkerboard",{size:16,rgba:"randomalpha",blend:"opacity"}],[0,"checkerboard",{size:8,rgba:"randomalpha",blend:"opacity"}],[0,"checkerboard",{size:4,rgba:"randomalpha",blend:"opacity"}],[0,"checkerboard",{size:2,rgba:"randomalpha",blend:"opacity"}],[0,"sharpen",{type:2}],[0,"spheres",{blend:"random",dynamic:!0}]]}),SeamlessTextureGenerator.preset("checkerboards2",{width:256,height:256,items:[[0,"checkerboard",{size:[[17,32],[17,32]],rgba:"randomalpha",blend:""}],[0,"checkerboard",{size:[[9,16],[9,16]],rgba:"randomalpha",blend:"random"}],[0,"checkerboard",{size:[[5,8],[5,8]],rgba:"randomalpha",blend:"random"}],[0,"checkerboard",{size:[[2,4],[2,4]],rgba:"randomalpha",blend:"random"}],[0,"sharpen",{type:2}],[0,"spheres",{blend:"random",dynamic:!0,opacity:255}]]}),SeamlessTextureGenerator.preset("circles",{width:256,height:256,items:[[0,"circles",{count:7,origin:[50,50],size:[2,100],rgba:[[1,255],[1,255],[1,255],[.05,.15]]}],[0,"circles",{blend:["opacity","lighten","darken","softlight","multiply","screen","exclusion"],count:7,origin:[50,50],size:[2,50],rgba:[[1,255],[1,255],[1,255],[.05,.15]]}],[0,"brightness",{adjust:-10,legacy:!0}],[0,"vibrance",{adjust:50}],[1,"copy",0],[1,"contrast",{adjust:50}]]}),SeamlessTextureGenerator.preset("clouds-color",{width:512,height:512,items:[[0,"fill"],[0,"clouds",{blend:"difference"}],[0,"clouds",{blend:"difference"}],[0,"clouds",{blend:["exclusion","lighten","darken","overlay","screen","linearlight","lineardodge"]}],[0,"spheres",{blend:"softlight",rgba:"random",count:[7,21],size:[20,70],dynamic:!0}],[0,"vibrance",{adjust:20}],[0,"contrast",{adjust:20}]]}),SeamlessTextureGenerator.preset("clouds-colormap",{width:512,height:512,items:[[0,"fill"],[0,"clouds",{blend:"difference"}],[1,"copy",0],[1,"clouds",{blend:"difference"}],[2,"copy",1],[2,"clouds",{blend:["exclusion","lighten","darken","overlay","screen","linearlight","lineardodge"]}],[3,"copy",2],[3,"spheres",{blend:"softlight",rgba:"random",count:[7,21],size:[20,70],dynamic:!0}],[3,"map",{xamount:[14,121],yamount:[14,121],xchannel:[0,3],ychannel:[0,3],xlayer:[0,3],ylayer:[0,3]}],[3,"vibrance",{adjust:20}],[3,"contrast",{adjust:20}]]}),SeamlessTextureGenerator.preset("clouds-emboss",{width:512,height:512,items:[[0,"clouds"],[0,"clouds",{blend:"difference"}],[0,"emboss"]]}),SeamlessTextureGenerator.preset("clouds",{width:512,height:512,items:[[0,"fill",{rgba:[0,[50,150],[200,255],1]}],[0,"clouds",{blend:"screen",rgba:[255,255,255,1],roughness:[2,5]}],[0,"clouds",{blend:"overlay",rgba:[[0,20],[0,150],[200,255],1],roughness:[2,4]}]]}),SeamlessTextureGenerator.preset("craters",{width:256,height:256,items:[[0,"fill",{rgba:[[144,255],[144,255],[144,255],[.8,1]]}],[0,"spheres",{blend:["overlay","linearlight","multiply","difference","softlight","darken","opacity","lineardodge"],dynamic:!0}],[0,"spheres",{blend:["overlay","linearlight","multiply","difference","softlight","darken","opacity","lineardodge"],dynamic:!0}],[0,"map",{xamount:[1,77],yamount:[1,77],xchannel:[0,3],ychannel:[0,3],xlayer:0,ylayer:0}],[0,"brightness",{adjust:10}],[0,"contrast",{adjust:20}]]}),SeamlessTextureGenerator.preset("crosshatch",{width:256,height:256,items:[[0,"crosshatch"],[0,"waves",{blend:"random"}],[0,"brightness",{adjust:20,legacy:!0}],[0,"contrast",{adjust:10}],[0,"vibrance",{adjust:100}]]}),SeamlessTextureGenerator.preset("dots",{width:256,height:256,items:[[0,"dots",{blend:["opacity","lighten"],shape:"sphere",size:[200,400],gridX:[4,12],gridY:[4,12],xsines:[4,12],ysines:[4,12]}],[0,"dots",{blend:"random",shape:"sphere",size:[50,200],gridX:[4,12],gridY:[4,12],xsines:[4,12],ysines:[4,12]}],[0,"sharpen"]]}),SeamlessTextureGenerator.preset("dunes-blue",{width:256,height:256,items:[[0,"pyramids",{blend:"lighten",rgba:[[0,10],[20,80],[150,255],[.7,1]]}],[0,"pyramids",{blend:"lineardodge",dynamic:!0,rgba:[170,170,170,[.7,1]]}],[0,"waves",{blend:"softlight"}],[0,"waves",{blend:"softlight"}],[0,"map",{xamount:[10,144],yamount:[10,144],xchannel:[0,3],ychannel:[0,3],xlayer:0,ylayer:0}],[0,"brightness",{adjust:20}],[0,"contrast",{adjust:30}]]}),SeamlessTextureGenerator.preset("dunes-magic",{width:256,height:256,items:[[0,"spheres",{blend:"lighten"}],[0,"spheres",{blend:["softlight","lighten","lineardodge"],dynamic:!0}],[0,"waves",{blend:"softlight"}],[0,"waves",{blend:"softlight"}],[0,"map",{xamount:[1,144],yamount:[1,144],xchannel:[0,3],ychannel:[0,3],xlayer:0,ylayer:0}]]}),SeamlessTextureGenerator.preset("fire",{width:256,height:256,items:[[0,"subplasma",{size:[2,4]}],[0,"subplasma",{blend:"difference",size:[1,4]}],[0,"subplasma",{blend:"difference",size:[1,4]}],[0,"subplasma",{blend:"difference",size:[1,4]}],[0,"subplasma",{blend:"difference",size:[1,4]}],[0,"spheres",{blend:["difference"],size:[25,77],count:10,dynamic:!0}],[0,"colorize",{colormap:"!fire"}],[0,"contrast",{value:42}]]}),SeamlessTextureGenerator.preset("gradients",{width:512,height:512,items:[[0,"colorbar",{mirror:!0,colormap:["fire","ice","dusk","seashore","random"]}],[1,"colorbar",{mirror:!0,type:"vertical",colormap:[{percent:0,rgba:[[0,255],[0,255],[0,255],1]},{percent:50,rgba:[[0,255],[0,255],[0,255],1]},{percent:100,rgba:[[0,255],[0,255],[0,255],1]}]}],[2,"copy"],[2,"merge",{layer:0,blend:["multiply","lighten","exclusion","screen","lineardodge"]}]]}),SeamlessTextureGenerator.preset("lines",{width:256,height:256,items:[[0,"lines",{size:[110,210],count:[100,440],freq1s:[21,150],freq1c:[21,150],freq2s:[21,150],freq2c:[21,150],rgba:[[1,255],[1,255],[1,255],[.3,.5]]}]]}),SeamlessTextureGenerator.preset("lines2",{width:256,height:256,items:[[0,"lines2"],[0,"lines2"],[0,"lines2"]]}),SeamlessTextureGenerator.preset("map2",{width:256,height:256,items:[[0,"waves",{blend:"",channels:[1,1,1,1]}],[1,"spheres",{blend:["lineardodge","lighten"]}],[2,"copy",1],[2,"map",{xamount:[2,255],yamount:[2,255],xchannel:[0,3],ychannel:[0,3],xlayer:[0,1],ylayer:[0,1]}]]}),SeamlessTextureGenerator.preset("merge-map",{width:256,height:256,items:[[0,"pyramids",{blend:"difference",count:[14,44]}],[0,"pyramids",{blend:"lineardodge",count:[7,14]}],[0,"brightness",{adjust:20}],[0,"contrast",{adjust:20}],[1,"spheres",{dynamic:!0,blend:"lineardodge",count:[14,21]}],[2,"copy",0],[2,"merge",{layer:1,blend:"lineardodge"}],[2,"map",{xamount:[44,77],yamount:[77,121],xchannel:[0,3],ychannel:[0,3],xlayer:1,ylayer:1}]]}),SeamlessTextureGenerator.preset("mergetest",{width:256,height:256,items:[[0,"waves",{blend:""}],[1,"pyramids",{blend:["lighten","difference","screen"],dynamic:!0}],[2,"spheres",{blend:["lighten","difference","screen"]}],[3,"merge",{layer:0}],[3,"merge",{layer:1,blend:"overlay"}],[4,"copy",3],[4,"merge",{layer:2,blend:"difference"}],[4,"brightness",{adjust:10,legacy:!0}],[4,"vibrance",{adjust:10}],[4,"contrast",{adjust:20}]]}),SeamlessTextureGenerator.preset("plasma-diffs",{width:256,height:256,items:[[0,"subplasma",{size:[1,4]}],[0,"subplasma",{blend:"difference",size:[1,4]}],[0,"subplasma",{blend:"difference",size:[1,4]}],[0,"subplasma",{blend:"difference",size:[1,4]}],[0,"subplasma",{blend:"difference",size:[1,4]}]]}),SeamlessTextureGenerator.preset("plasma-mergemap",{width:256,height:256,items:[[0,"subplasma",{size:[2,4]}],[0,"subplasma",{blend:"darken",size:[2,4]}],[0,"subplasma",{blend:"difference",size:[2,4]}],[0,"subplasma",{blend:"linearlight",size:[2,4]}],[0,"map",{xamount:[21,77],yamount:[21,77],xchannel:[0,3],ychannel:[0,3],xlayer:0,ylayer:0}]]}),SeamlessTextureGenerator.preset("plasma-shadows",{width:256,height:256,items:[[0,"subplasma",{size:[3,5]}],[0,"subplasma",{blend:"difference",size:[3,5]}],[0,"subplasma",{blend:"difference",size:[3,5]}],[0,"subplasma",{blend:"difference",size:[3,5]}],[0,"subplasma",{blend:"difference",size:[3,5]}],[0,"spheres",{blend:"multiply",dynamic:!0}],[0,"brightness",{adjust:40}],[0,"contrast",{adjust:40}],[0,"vibrance",{adjust:20}]]}),SeamlessTextureGenerator.preset("pyramids-map",{width:256,height:256,items:[[0,"pyramids",{blend:"difference",count:[7,21]}],[0,"pyramids",{blend:"lineardodge",count:[4,7]}],[0,"brightness",{adjust:20}],[0,"contrast",{adjust:20}],[1,"copy",0],[1,"map",{xamount:[44,77],yamount:[77,121],xchannel:[0,3],ychannel:[0,3],xlayer:[0,1],ylayer:[0,1]}]]}),SeamlessTextureGenerator.preset("pyramids",{width:256,height:256,items:[[0,"pyramids",{blend:["difference","lighten"]}],[1,"pyramids",{blend:["difference","lighten"]}],[2,"copy",0],[2,"merge",{layer:1,blend:["exclusion","difference","lighten","lineardodge","screen","darken"]}],[2,"brightness",{adjust:80}],[2,"contrast",{adjust:140}],[2,"vibrance",{adjust:70}]]}),SeamlessTextureGenerator.preset("rrrr",{width:256,height:256,normalize:"compress",items:[[0,["spheres","pyramids","waves","subplasma","dots","clouds","noise","lines2","colorbar","checkerboard","lines","squares","circles","crosshatch","xor"],{blend:["lighten","opacity","screen"],rgba:[[0,255],[0,255],[0,255],[.2,.9]],dynamic:"random"}],[1,"copy",0],[1,["spheres","pyramids","waves","subplasma","dots","clouds","noise","lines2","colorbar","checkerboard","lines","squares","circles","crosshatch","xor"],{blend:"random",rgba:[[0,255],[0,255],[0,255],[.1,.9]],dynamic:"random"}],[2,"copy",1],[2,["spheres","pyramids","waves","subplasma","dots","clouds","noise","lines2","colorbar","checkerboard","lines","squares","circles","crosshatch","xor"],{blend:"random",rgba:[[0,255],[0,255],[0,255],[.1,.9]],dynamic:"random"}],[3,"copy",2],[3,"map",{xamount:[2,177],yamount:[2,177],xchannel:[0,2],ychannel:[0,2],xlayer:[0,2],ylayer:[0,2]}]]}),SeamlessTextureGenerator.preset("rrrr2",{width:256,height:256,normalize:"compress",items:[[0,["spheres","pyramids","waves","subplasma","dots","clouds","noise","lines2","colorbar","checkerboard","lines","squares","circles","crosshatch"],{rgba:[[32,255],[32,255],[32,255],[.5,.9]],dynamic:"random"}],[0,["spheres","pyramids","waves","subplasma","dots","clouds","noise","lines2","colorbar","checkerboard","lines","squares","circles","crosshatch"],{blend:"random",rgba:[[0,255],[0,255],[0,255],[.1,.9]],dynamic:"random"}],[1,["spheres","pyramids","waves","subplasma","dots","clouds","noise","lines2","colorbar","checkerboard","lines","squares","circles","crosshatch"],{rgba:[[32,255],[32,255],[32,255],[.5,.9]],dynamic:"random"}],[1,["spheres","pyramids","waves","subplasma","dots","clouds","noise","lines2","colorbar","checkerboard","lines","squares","circles","crosshatch"],{blend:"random",rgba:[[0,255],[0,255],[0,255],[.1,.9]],dynamic:"random"}],[2,"copy",{layer:0}],[2,"merge",{layer:1,blend:"random"}],[2,"brightness",{adjust:20}],[2,"contrast",{adjust:30}],[2,"map",{xamount:[2,177],yamount:[2,177],xchannel:[0,4],ychannel:[0,4],xlayer:[0,2],ylayer:[0,2]}]]}),SeamlessTextureGenerator.preset("sci-fi-wall",{width:256,height:256,items:[[0,"waves",{}],[0,"dots",{blend:["lighten","opacity","multiply"],shape:"rect",size:[20,250],gridX:[2,12],gridY:[2,12],xsines:[2,12],ysines:[2,12]}],[0,"dots",{blend:["lighten","opacity","multiply"],shape:"rect",size:[20,250],gridX:[2,12],gridY:[2,12],xsines:[2,12],ysines:[2,12]}],[0,"sharpen",{type:1}],[0,"spheres",{blend:["multiply","darken"],dynamic:!0,opacity:255}]]}),SeamlessTextureGenerator.preset("sci-fi-wall2",{width:256,height:256,items:[[0,"waves",{}],[0,"dots",{blend:["lighten","opacity","multiply"],shape:"rect",size:[10,280],gridX:[2,14],gridY:[2,14],xsines:[2,14],ysines:[2,14]}],[0,"dots",{blend:["lighten","opacity","multiply"],shape:"rect",size:[10,280],gridX:[2,14],gridY:[2,14],xsines:[2,14],ysines:[2,14]}],[0,"pyramids",{blend:["softlight","overlay"],dynamic:!1,count:10}],[0,"sharpen",{type:1}],[0,"spheres",{blend:["multiply","darken"],dynamic:!0,opacity:255}]]}),SeamlessTextureGenerator.preset("sci-fi-wall3",{width:512,height:512,items:[[0,"waves",{}],[0,"dots",{blend:["lighten","opacity","multiply"],shape:"rect",size:[10,280],gridX:[2,14],gridY:[2,14],xsines:[2,14],ysines:[2,14]}],[0,"dots",{blend:["lighten","opacity","multiply"],shape:"rect",size:[10,280],gridX:[2,14],gridY:[2,14],xsines:[2,14],ysines:[2,14]}],[0,"pyramids",{blend:["softlight","overlay"],dynamic:!1,count:10}],[0,"sharpen",{type:1}],[0,"spheres",{blend:["multiply","darken"],dynamic:!0,opacity:255}],[1,"copy",{}],[1,"rotate",{times:[1,3]}]]}),SeamlessTextureGenerator.preset("sines-blue",{width:512,height:512,items:[[0,"subplasma",{size:[1,5],rgba:[[0,255],[0,255],[77,255],1]}],[0,"sinecolor",{channel:[0,2]}],[0,"subplasma",{blend:"random",size:[1,5],rgba:"randomalpha"}],[0,"sinecolor",{channel:[0,2]}],[0,"subplasma",{blend:"random",size:[1,5],rgba:"randomalpha"}],[0,"sinecolor",{channel:[0,2]}],[0,"colorize",{colormap:"ice"}],[0,"brightness",{adjust:20}],[0,"contrast",{adjust:20}],[0,"vibrance",{adjust:20}]]}),SeamlessTextureGenerator.preset("sines-chrome",{width:256,height:256,items:[[0,"subplasma",{size:3,rgba:[[0,255],[0,255],[77,255],1]}],[0,"sinecolor",{channel:2}],[0,"subplasma",{blend:["difference","darken","lighten"],size:3,rgba:[[0,255],[77,255],[0,255],1]}],[0,"sinecolor",{channel:1}],[0,"subplasma",{blend:["difference","darken","lighten"],size:3,rgba:[[77,255],[0,255],[0,255],1]}],[0,"sinecolor",{channel:0}],[0,"grayscale"],[0,"brightness",{adjust:20}],[0,"contrast",{adjust:20}],[0,"vibrance",{adjust:20}]]}),SeamlessTextureGenerator.preset("sines-color",{width:256,height:256,items:[[0,"subplasma",{size:3,rgba:[[0,255],[0,255],[77,255],1]}],[0,"sinecolor",{channel:2}],[0,"subplasma",{blend:["difference","darken","lighten"],size:3,rgba:[[0,255],[77,255],[0,255],1]}],[0,"sinecolor",{channel:1}],[0,"subplasma",{blend:["difference","darken","lighten"],size:3,rgba:[[77,255],[0,255],[0,255],1]}],[0,"sinecolor",{channel:0}],[0,"brightness",{adjust:20}],[0,"contrast",{adjust:20}],[0,"vibrance",{adjust:20}]]}),SeamlessTextureGenerator.preset("sines-plasma",{width:512,height:512,items:[[0,"subplasma",{size:[1,5],rgba:[[32,255],[32,255],[32,255],1]}],[0,"sinecolor",{blend:"random",channel:[0,2]}],[0,"subplasma",{blend:"random",size:[1,5],rgba:"randomalpha"}],[0,"sinecolor",{blend:"random",channel:[0,2]}],[0,"subplasma",{blend:"random",size:[1,5],rgba:"randomalpha"}],[0,"sinecolor",{blend:"random",channel:[0,2]}],[0,"brightness",{adjust:20}],[0,"contrast",{adjust:20}],[0,"vibrance",{adjust:20}]]}),SeamlessTextureGenerator.preset("spaceship-color",{width:256,height:256,items:[[0,"waves",{blend:"",rgba:[128,128,128,.5]}],[0,"lines2",{blend:["opacity","screen"],count:[4,44],size:[.1,7]}],[0,"lines2",{blend:"random",type:"horizontal",count:[4,44],size:[.1,7]}],[0,"squares",{blend:["opacity","darken","softlight",""]}],[0,"squares",{blend:["opacity","darken","softlight",""],count:[4,44],size:[7,21]}],[0,"squares",{blend:["opacity","darken","softlight",""],count:[21,44],size:[4,7]}],[0,"pyramids",{blend:"random",dynamic:!0}],[0,"noise",{blend:"softlight",opacity:.2}],[0,"lines2",{blend:["opacity"],rgba:[[32,255],[32,255],[32,255],[.1,.5]],type:"horizontal",count:[21,44],size:[.1,1]}],[0,"lines2",{blend:["opacity"],rgba:[0,0,0,[.1,.5]],count:[4,21],size:[.2,0,5]}],[0,"sharpen",{type:1}]]}),SeamlessTextureGenerator.preset("spaceship-hull",{width:256,height:256,items:[[0,"waves",{blend:"",rgba:[128,128,128,.5]}],[0,"lines2",{blend:["opacity","screen"],count:[4,44],size:[.1,7]}],[0,"lines2",{blend:"random",type:"horizontal",count:[4,44],size:[.1,7]}],[0,"squares",{blend:["opacity","darken","softlight",""]}],[0,"squares",{blend:["opacity","darken","softlight",""],count:[4,44],size:[7,21]}],[0,"squares",{blend:["opacity","darken","softlight",""],count:[21,44],size:[4,7]}],[0,"pyramids",{blend:"random",dynamic:!0}],[0,"noise",{blend:"softlight",opacity:.2}],[0,"grayscale"],[0,"lines2",{blend:["opacity"],rgba:[[32,255],[32,255],[32,255],[.1,.5]],type:"horizontal",count:[21,44],size:[.1,1]}],[0,"lines2",{blend:["opacity"],rgba:[0,0,0,[.1,.5]],count:[4,21],size:[.2,0,5]}],[0,"sharpen",{type:1}]]}),SeamlessTextureGenerator.preset("spheres-blend",{width:512,height:512,items:[[0,"fill",{blend:"opacity",rgba:"random"}],[0,"spheres",{blend:"random",origin:"random",dynamic:!0,count:21,size:[10,60]}],[0,"spheres",{blend:"random",origin:"random",dynamic:!0,count:21,size:[10,60]}],[0,"spheres",{blend:"random",origin:"random",dynamic:!0,count:44,size:[10,44]}]]}),SeamlessTextureGenerator.preset("spheres-diffdodge",{width:256,height:256,items:[[0,"spheres",{blend:"difference",count:[7,21]}],[0,"spheres",{blend:"lineardodge",count:[4,7]}],[0,"brightness",{adjust:20}],[0,"contrast",{adjust:20}]]}),SeamlessTextureGenerator.preset("spheres-invert",{width:256,height:256,items:[[0,"spheres",{blend:"difference",count:[21,32]}],[0,"invert"],[1,"spheres",{blend:"difference",count:[21,48]}],[1,"invert"],[2,"merge",{layer:0}],[2,"merge",{layer:1,blend:"difference"}]]}),SeamlessTextureGenerator.preset("spheres-lilio",{width:256,height:256,items:[[0,"spheres",{blend:"lighten",count:[21,44]}],[1,"spheres",{blend:"lineardodge",count:[21,44]}],[2,"merge",{layer:0}],[2,"merge",{layer:1,blend:"overlay"}]]}),SeamlessTextureGenerator.preset("spheres-map",{width:256,height:256,items:[[0,"spheres",{blend:"difference",count:[7,21]}],[0,"spheres",{blend:"lineardodge",count:[4,7]}],[0,"brightness",{adjust:20}],[0,"contrast",{adjust:20}],[1,"copy",0],[1,"map",{xamount:[44,77],yamount:[77,121],xchannel:[0,3],ychannel:[0,3],xlayer:[0,1],ylayer:[0,1]}]]}),SeamlessTextureGenerator.preset("spheres-map2",{width:256,height:256,items:[[0,"spheres",{blend:"lighten",count:21}],[1,"spheres",{blend:"lighten",count:21}],[1,"merge",{layer:0,blend:["overlay","lighten","difference"]}],[1,"map",{xamount:[21,177],yamount:[21,177],xchannel:[0,3],ychannel:[0,3],xlayer:[0,1],ylayer:[0,1]}]]}),SeamlessTextureGenerator.preset("spheres-worm",{width:256,height:256,items:[[0,"spheres",{blend:["lighten","lineardodge"],count:[14,21]}],[1,"spheres",{blend:["lighten","lineardodge"],count:[14,21]}],[2,"merge",{layer:0}],[2,"merge",{layer:1,blend:"darken"}]]}),SeamlessTextureGenerator.preset("spheres",{width:256,height:256,items:[[0,"spheres",{blend:"lighten",count:[7,21]}],[1,"spheres",{blend:"lighten",count:[4,7]}],[1,"merge",{layer:0,blend:"lighten"}],[1,"brightness",{adjust:20}],[1,"contrast",{adjust:20}]]}),SeamlessTextureGenerator.preset("squares",{width:256,height:256,items:[[0,"squares",{count:[4,14],origin:[50,50],size:[2,200],rgba:[[1,255],[1,255],[1,255],[.05,.15]]}],[0,"squares",{blend:["opacity","lighten","darken","softlight","multiply","screen","exclusion"],count:[4,14],origin:[50,50],size:[2,100],rgba:[[1,255],[1,255],[1,255],[.05,.15]]}],[0,"brightness",{adjust:-10,legacy:!0}],[0,"vibrance",{adjust:50}],[1,"copy",0],[1,"contrast",{adjust:50}]]}),SeamlessTextureGenerator.preset("starfield",{width:512,height:512,items:[[0,"fill",{rgba:[[30,60],[30,60],[30,60],1]}],[0,"clouds",{blend:"softlight",rgba:[232,126,226,1],roughness:[2,4]}],[0,"clouds",{blend:"overlay",rgba:[44,108,208,1],roughness:[2,4]}],[0,"pyramids",{blend:"screen",rgba:[255,255,255,.5],count:170,size:.5}],[0,"pyramids",{blend:"screen",rgba:[255,255,255,1],count:170,size:1}],[0,"pyramids",{blend:"lineardodge",rgba:[255,255,255,1],count:7,size:[1,3]}],[0,"brightness",{adjust:10,legacy:!0}],[0,"vibrance",{adjust:50}],[0,"contrast",{adjust:50}]]}),SeamlessTextureGenerator.preset("stone-and-flowers",{width:256,height:256,items:[[0,"subplasma",{size:[3,5]}],[0,"subplasma",{blend:"difference",size:[3,5]}],[0,"subplasma",{blend:"difference",size:[3,5]}],[0,"subplasma",{blend:"difference",size:[3,5]}],[0,"subplasma",{blend:"difference",size:[3,5]}],[0,"spheres",{blend:"difference",dynamic:!1}],[0,"brightness",{adjust:20}],[0,"contrast",{adjust:20}],[0,"vibrance",{adjust:20}]]}),SeamlessTextureGenerator.preset("waves-3",{width:256,height:256,items:[[0,"waves"],[0,"waves",{blend:"difference",xsines:[1,3],ysines:[1,4]}],[0,"waves",{blend:"linearburn",xsines:[1,3],ysines:[1,4]}],[0,"brightness",{adjust:80,legacy:!0}],[0,"vibrance",{adjust:20}]]}),SeamlessTextureGenerator.preset("waves-4",{width:256,height:256,items:[[0,"waves"],[0,"waves",{blend:"softlight"}],[0,"waves",{blend:"difference"}],[0,"waves",{blend:"linearburn"}],[0,"brightness",{adjust:40,legacy:!0}],[0,"vibrance",{adjust:10}]]}),SeamlessTextureGenerator.preset("waves-5-map",{width:256,height:256,items:[[0,"waves"],[0,"waves",{blend:"difference"}],[0,"waves",{blend:"linearburn"}],[0,"waves",{blend:"difference"}],[0,"waves",{blend:"linearburn"}],[0,"subplasma",{blend:["multiply","difference"]}],[0,"brightness",{adjust:10,legacy:!0}],[0,"vibrance",{adjust:10}],[0,"map"]]}),SeamlessTextureGenerator.preset("waves-5",{width:256,height:256,items:[[0,"waves"],[0,"waves",{blend:"difference"}],[0,"waves",{blend:"linearburn"}],[0,"waves",{blend:"difference"}],[0,"waves",{blend:"linearburn"}],[0,"brightness",{adjust:10,legacy:!0}],[0,"vibrance",{adjust:10}]]}),SeamlessTextureGenerator.preset("waves-cool-rotate",{width:512,height:512,items:[[0,"spheres",{blend:"lighten",origin:"random",dynamic:!1,count:21,size:[20,70]}],[0,"spheres",{blend:"lineardodge",origin:"random",dynamic:!0,count:21,size:[20,70]}],[0,"waves",{blend:"softlight",level:50,xsines:20,ysines:1}],[0,"waves",{blend:"softlight",level:50,xsines:20,ysines:1}],[0,"map",{xamount:[21,121],yamount:[21,121],xchannel:0,ychannel:2,xlayer:0,ylayer:0}],[null,"copy",{}],[null,"rotate",{type:1,angle:90,times:[1,3],blend:"random"}]]}),SeamlessTextureGenerator.preset("waves-cool",{width:256,height:256,items:[[0,"spheres",{blend:"lighten",origin:"random",dynamic:!1,count:21,size:[20,70]}],[0,"spheres",{blend:"lineardodge",origin:"random",dynamic:!0,count:21,size:[20,70]}],[0,"waves",{blend:"softlight",level:50,xsines:20,ysines:1}],[0,"waves",{blend:"softlight",level:50,xsines:20,ysines:1}],[0,"map",{xamount:[21,121],yamount:[21,121],xchannel:0,ychannel:2,xlayer:0,ylayer:0}]]}),SeamlessTextureGenerator.preset("xor-sharpen",{width:256,height:256,items:[[0,"xor",{zoom:[1,4]}],[1,"xor",{zoom:[1,7]}],[2,"xor",{zoom:[1,14]}],[3,"copy",0],[3,"merge",{layer:1,blend:"random"}],[3,"merge",{layer:2,blend:"random"}],[3,"sharpen"],[3,"brightness",{adjust:10,legacy:!0}],[3,"vibrance",{adjust:50}],[3,"contrast",{adjust:50}]]}),SeamlessTextureGenerator.preset("xor",{width:256,height:256,items:[[0,"xor",{zoom:[1,14]}],[1,"xor",{zoom:[1,21]}],[2,"xor",{zoom:[1,42]}],[3,"copy",0],[3,"merge",{layer:1,blend:"random"}],[3,"merge",{layer:2,blend:"random"}]]}),SeamlessTextureGenerator.preset("z-dev-rotate",{width:512,height:512,preset:{name:"random",seed:null},items:[[null,"copy",{}],[null,"rotate",{type:1,angle:90,times:[1,4],blend:"random"}]]}),SeamlessTextureGenerator.preset("z-dev",{width:1024,height:512,normalize:"limitless",items:[[0,"clouds",{seed:5129359}],[0,"squares",{seed:632731}],[1,"copy",{layer:0}],[1,"equirectangular",{}]]}),SeamlessTextureGenerator.preset("z-error-blend",{width:512,height:512,items:[[0,"clouds",{colormap:"redblue",seed:32,roughness:4}],[1,"clouds",{colormap:"seashore",seed:211,roughness:4}],[2,"copy"],[2,"merge",{layer:0,blend:"multiply"}],[3,"copy",{layer:0}],[3,"clouds",{colormap:"seashore",blend:"multiply",seed:211,roughness:4}]]}),SeamlessTextureGenerator.preset("z-error-blend2",{width:256,height:256,items:[[0,"dots",{blend:["difference-invert","lineardodge-invert","backlight"],rgba:[[0,255],[0,255],120,.9],shape:"rect",size:[100,280],gridX:[2,7],gridY:[2,7],xsines:[2,7],ysines:[2,7]}]]}),SeamlessTextureGenerator.preset("z-error-blend3",{width:256,height:256,items:[[0,"checkerboard",{blend:"screen",rgba:[57,88,37,173],even:!1,size:[20,22],dynamic:!0,seed:11510151}]]}),SeamlessTextureGenerator.preset("z-test-pattern",{width:256,height:256,items:[[0,"test-pattern"]]}),function(e){e.blend("opacity",function(e,r,t){return t}),e.blend("multiply",function(e,r,t){return t[0]=r[0]*t[0]/255,t[1]=r[1]*t[1]/255,t[2]=r[2]*t[2]/255,t}),e.blend("linearburn",function(e,r,t){return t[0]=r[0]+t[0]-255,t[1]=r[1]+t[1]-255,t[2]=r[2]+t[2]-255,t}),e.blend("difference",function(e,r,t){return t[0]=Math.abs(t[0]-r[0]),t[1]=Math.abs(t[1]-r[1]),t[2]=Math.abs(t[2]-r[2]),t}),e.blend("difference-invert",function(e,r,t){return t[0]=255-Math.abs(t[0]-r[0]),t[1]=255-Math.abs(t[1]-r[1]),t[2]=255-Math.abs(t[2]-r[2]),t}),e.blend("screen",function(e,r,t){return t[0]=255-(255-r[0])*(255-t[0])/255,t[1]=255-(255-r[1])*(255-t[1])/255,t[2]=255-(255-r[2])*(255-t[2])/255,t}),e.blend("overlay",function(e,r,t){return t[0]=128<r[0]?255-2*(255-t[0])*(255-r[0])/255:r[0]*t[0]*2/255,t[1]=128<r[1]?255-2*(255-t[1])*(255-r[1])/255:r[1]*t[1]*2/255,t[2]=128<r[2]?255-2*(255-t[2])*(255-r[2])/255:r[2]*t[2]*2/255,t}),e.blend("exclusion",function(e,r,t){return t[0]=128-2*(r[0]-128)*(t[0]-128)/255,t[1]=128-2*(r[1]-128)*(t[1]-128)/255,t[2]=128-2*(r[2]-128)*(t[2]-128)/255,t}),e.blend("darken",function(e,r,t){return t[0]=t[0]<r[0]?t[0]:r[0],t[1]=t[1]<r[1]?t[1]:r[1],t[2]=t[2]<r[2]?t[2]:r[2],t}),e.blend("lighten",function(e,r,t){return t[0]=t[0]>r[0]?t[0]:r[0],t[1]=t[1]>r[1]?t[1]:r[1],t[2]=t[2]>r[2]?t[2]:r[2],t}),e.blend("lineardodge",function(e,r,t){return t[0]=r[0]+t[0],t[1]=r[1]+t[1],t[2]=r[2]+t[2],t}),e.blend("lineardodge-invert",function(e,r,t){return t[0]=255-(t[0]+r[0]),t[1]=255-(t[1]+r[1]),t[2]=255-(t[2]+r[2]),t}),e.blend("linearlight",function(e,r,t){return t[0]=r[0]+2*t[0]-255,t[1]=r[1]+2*t[1]-255,t[2]=r[2]+2*t[2]-255,t}),e.blend("linearburn",function(e,r,t){return t[0]=r[0]+t[0]-255,t[1]=r[1]+t[1]-255,t[2]=r[2]+t[2]-255,t}),e.blend("softlight",function(e,r,t){return t[0]=128<r[0]?255-(255-r[0])*(255-(t[0]-128))/255:r[0]*(t[0]+128)/255,t[1]=128<r[1]?255-(255-r[1])*(255-(t[1]-128))/255:r[1]*(t[1]+128)/255,t[2]=128<r[2]?255-(255-r[2])*(255-(t[2]-128))/255:r[2]*(t[2]+128)/255,t}),e.blend("subbtract",function(e,r,t){return t[0]=Math.max(r[0]-t[0],0),t[1]=Math.max(r[1]-t[1],0),t[2]=Math.max(r[2]-t[2],0),t}),e.blend("backlight",function(e,r,t){return r[0]=0===r[0]?.01:r[0],r[1]=0===r[1]?.01:r[1],r[2]=0===r[2]?.01:r[2],t[0]=255/r[0]*(255/t[0]),t[1]=255/r[1]*(255/t[1]),t[2]=255/r[2]*(255/t[2]),t}),e.blend("average",function(e,r,t){return t[0]=(t[0]+r[0])/2,t[1]=(t[1]+r[1])/2,t[2]=(t[2]+r[2])/2,t}),e.blend("alphamap",function(e,r,t){return r[3]=(t[0]+t[1]+t[2])/3,r})}(SeamlessTextureGenerator),function(e){e.colormap("blackwhite",function(){return[{percent:0,rgba:[0,0,0,255]},{percent:25,rgba:[255,255,255,255]},{percent:50,rgba:[0,0,0,255]},{percent:75,rgba:[255,255,255,255]},{percent:100,rgba:[0,0,0,255]}]}),e.colormap("dawn",function(){return[{percent:0,rgba:[255,255,192,255]},{percent:25,rgba:[255,255,128,255]},{percent:50,rgba:[255,128,128,255]},{percent:75,rgba:[128,0,128,255]},{percent:100,rgba:[0,0,128,255]}]}),e.colormap("dusk",function(){return[{percent:0,rgba:[255,255,255,255]},{percent:25,rgba:[255,128,255,255]},{percent:50,rgba:[128,0,255,255]},{percent:75,rgba:[0,0,128,255]},{percent:100,rgba:[0,0,0,255]}]}),e.colormap("kryptonite",function(){return[{percent:0,rgba:[255,255,255,255]},{percent:25,rgba:[255,255,128,255]},{percent:50,rgba:[128,255,0,255]},{percent:75,rgba:[0,128,0,255]},{percent:100,rgba:[0,0,0,255]}]}),e.colormap("ice",function(){return[{percent:0,rgba:[255,255,255,255]},{percent:25,rgba:[128,255,255,255]},{percent:50,rgba:[0,128,255,255]},{percent:75,rgba:[0,0,128,255]},{percent:100,rgba:[0,0,0,255]}]}),e.colormap("fire",function(){return[{percent:0,rgba:[255,255,255,255]},{percent:25,rgba:[255,255,128,255]},{percent:50,rgba:[255,128,0,255]},{percent:75,rgba:[128,0,0,255]},{percent:100,rgba:[0,0,0,255]}]}),e.colormap("redblue",function(){return[{percent:0,rgba:[96,0,0,255]},{percent:25,rgba:[192,0,0,255]},{percent:50,rgba:[255,255,255,255]},{percent:75,rgba:[0,0,192,255]},{percent:100,rgba:[0,0,96,255]}]}),e.colormap("seashore",function(){return[{percent:0,rgba:[255,255,192,255]},{percent:25,rgba:[255,255,128,255]},{percent:50,rgba:[128,255,128,255]},{percent:75,rgba:[0,128,128,255]},{percent:100,rgba:[0,0,128,255]}]})}(SeamlessTextureGenerator),function(e){var n,a;e.event("beforeEffect","save start time",function(e,r){n=(new Date).getTime()}),e.event("afterEffect","log",function(e,r){var t=(new Date).getTime()-n;e.log(r.layer,t,r.name,r.params)}),e.event("beforeRender","log",function(e,r){a=(new Date).getTime()}),e.event("afterRender","log",function(e,r){var t=(new Date).getTime()-a;e.log(t,r)})}(SeamlessTextureGenerator),function(e){e.function("copy",{layer:null},function(e,r){return"number"==typeof r&&(r={layer:r}),null===r.layer&&(r.layer=e.layers.length-1),null!=e.layers[r.layer]&&(e.texture.data=e.layerCopy(r.layer)),r}),e.function("mergeall",{blend:"opacity",firstcopy:!0,opacity:null},function(e,r){for(var t=e.layers.length,n=0;n<=t;n++){e.layers[n];0===n&&!0===r.firstcopy?e.do("copy",{layer:0}):e.do("merge",{blend:r.blend,layer:n,opacity:r.opacity})}return r}),e.function("merge",{blend:"opacity",layer:0,opacity:null},function(e,r){if(void 0===e.layers[r.layer])return r;for(var t=e.layers[r.layer],n=0;n<e.texture.height;n++)for(var a=0;a<e.texture.width;a++){var s=e.texture.offset(a,n);e.point.rgba=[t[s],t[s+1],t[s+2],r.opacity?r.opacity:t[s+3]],e.point.set(a,n)}return r}),e.function("map",{xamount:[5,255],yamount:[5,255],xchannel:[0,2],ychannel:[0,2],xlayer:0,ylayer:0},function(e,r){r.xamount=e.randByArraySeed(r.xamount),r.yamount=e.randByArraySeed(r.yamount),r.xchannel=e.randByArraySeed(r.xchannel),r.ychannel=e.randByArraySeed(r.ychannel),r.xlayer=e.randByArraySeed(r.xlayer),r.ylayer=e.randByArraySeed(r.ylayer);for(var t,n,a,s,i,o,l,d=new e.buffer,c=e.texture.width,u=e.texture.height,h=e.layers[r.xlayer],p=e.layers[r.ylayer],m=0;m<c;m++)for(t=0;t<u;t++)o=h[(i=e.texture.offset(m,t))+r.xchannel],l=p[i+r.ychannel],n=c%16==0?e.wrapx(m+(o*r.xamount*c>>16)):m+o*r.xamount*c/(c*c),a=u%16==0?e.wrapy(t+(l*r.yamount*u>>16)):t+l*r.yamount*u/(u*u),s=e.point.get(n,a),d.data[i]=s[0],d.data[i+1]=s[1],d.data[i+2]=s[2],d.data[i+3]=s[3];for(var f=e.texture.size();f--;)e.texture.data[f]=d.data[f];return r}),e.function("rotate",{angle:90,times:1,type:1,blend:e.blendSafe},function(e,r){r.type=e.randByArraySeed(r.type),null===r.angle?r.angle=e.randItemByArraySeed(r.angle,[90,180,270]):r.angle=e.randByArraySeed(r.angle),r.times=e.randByArraySeed(r.times);for(var t,n,a,s,i,o,l=new e.buffer,d=e.texture.size(),c=e.texture.width,u=e.texture.height,h=r.angle*(Math.PI/180),p=1;p<=r.times;p++)d=e.texture.size(),h=p*r.angle*(Math.PI/180),(1===r.type?function(){for(t=0;t<c;t++)for(n=0;n<u;n++)i=Math.ceil(Math.cos(h)*t-Math.sin(h)*n),o=Math.ceil(Math.sin(h)*t+Math.cos(h)*n),rgba1=e.point.get(t,n),rgba2=e.point.get(i,o),a=e.blend(r.blend,rgba2,rgba1),s=e.texture.offset(t,n),l.data[s]=a[0],l.data[s+1]=a[1],l.data[s+2]=a[2],l.data[s+3]=a[3];for(;d--;)e.texture.data[d]=l.data[d]}:function(){for(t=0;t<c;t++)for(n=0;n<u;n++)i=Math.ceil(Math.cos(h)*t-Math.sin(h)*n),o=Math.ceil(Math.sin(h)*t+Math.cos(h)*n),rgba1=e.point.get(t,n),rgba2=e.point.get(i,o),a=e.blend(r.blend,rgba2,rgba1),s=e.texture.offset(i,o),l.data[s]=a[0],l.data[s+1]=a[1],l.data[s+2]=a[2],l.data[s+3]=a[3];for(;d--;)e.texture.data[d]=l.data[d]})();return r}),e.function("equirectangular",{layer:null},function(e,r){null===r.layer&&(r.layer=e.layers.length-1);for(var t,n,a,s,i,o,l,d,c,u,h=new e.buffer,p=e.texture.width,m=e.texture.height,f=m/2,b=Math.PI,g=p/2,y=m/2,x=0;x<p;x++)for(t=0;t<m;t++)s=360-360*x/p-180,i=180-180*t/m,o=Math.sin(i*b/180),l=Math.cos(s*b/180)*o,d=Math.sin(s*b/180)*o,c=Math.round(l*f+g),u=Math.round(d*f+y),n=e.point.get(c,u),a=e.texture.offset(x,t),h.data[a]=n[0],h.data[a+1]=n[1],h.data[a+2]=n[2],h.data[a+3]=n[3];for(var v=e.texture.size();v--;)e.texture.data[v]=h.data[v];return r})}(SeamlessTextureGenerator),function(f){f.getGenerator=function(c,u,e){function h(){null==c&&(c=256),c<1&&(c=256),u<1&&(u=256),2048<c&&(c=2048),2048<u&&(u=2048),null==u&&(u=c),t=(c+u)/2}var p=this,l=[],r={},t=null,m={shape:p.shapes,effects:Object.keys(p.effects),layers:[],normalize:e||"limitless"};h(),m.log=function(){if(this.debug&&0<arguments.length){for(var e=[],r=0;r<arguments.length;r++)e.push(arguments[r]);console.log(e)}},m.clear=function(){return m.texture.clear(),m.layers=[],l=[],r.start=(new Date).getTime(),m},m.buffer=function(e){this.data=null,this.debug=!1,this.components=4,this.width=c,this.height=u,this.wha=(this.width+this.height)/2,this.background=[0,0,0,255],"object"==typeof e&&(this.background=e),this.pixels=function(){return this.width*this.height},this.size=function(){return this.data.length},this.export=function(e,r){e=void 0!==e?e:m.normalize;var t,n=(r=r||this.data).length;switch(e){case"limitless":for(t=new Float32Array(n);n--;)t[n]=r[n];break;case"clamped":for(t=new Uint8ClampedArray(n);n--;)t[n]=r[n];break;case"pingpong":for(t=new Uint8ClampedArray(n);n--;)t[n]=m.calc.pingpong(r[n],0,255);break;case"compress":t=new Uint8ClampedArray(n);for(var a=r[0],s=r[0],i=n;i--;)r[i]&&(a=Math.min(a,r[i]),s=Math.max(s,r[i]));a=Math.floor(a);for(var o=255/((s=Math.ceil(s))-a);n;)t[n-1]=r[n-1],t[n-2]=(r[n-2]-a)*o,t[n-3]=(r[n-3]-a)*o,t[n-4]=(r[n-4]-a)*o,n-=4}return t},this.clear=function(e){this.data=new Float32Array(this.width*this.height*this.components),null==e&&(e=this.background);for(var r=this.size();r;)this.data[r-1]=e[3],this.data[r-2]=e[2],this.data[r-3]=e[1],this.data[r-4]=e[0],r-=this.components},this.pattern=function(e,r){var t,n,a=e/r;return r<=e?n=e-(t=Math.floor(a)*r):e<0?(t=Math.ceil(a)*r,r<=(n=r-Math.abs(e-t))?n-=r:n):void 0},this.offset=function(e,r){return e=Math.round(e),r=Math.round(r),(e<0||e>=this.width)&&(e=this.pattern(e,this.width)),(r<0||r>=this.height)&&(r=this.pattern(r,this.height)),r*this.width*this.components+e*this.components},this.set=function(e,r,t){var n=this.offset(e,r);this.data[n]=t[0],this.data[n+1]=t[1],this.data[n+2]=t[2],this.data[n+3]=t[3]},this.get=function(e,r){var t=this.offset(e,r);return[this.data[t],this.data[t+1],this.data[t+2],this.data[t+3]]},this.alpha=function(e){switch(e){case"sphere":for(;size;)m.texture.data[size]=.5,size-=4}},this.canvas=function(e){for(var r=this.size(),t=e.getContext("2d").getImageData(0,0,this.width,this.height).data;r--;)m.texture.data[r]=t[r]},null===this.data&&this.clear()},m.texture=new m.buffer,m.layerCopy=function(e){for(var r=[],t=this.layers[e],n=t.length;n--;)r[n]=t[n];return r};function d(e,r){var t,n={};for(t in e)n[t]=e[t];for(t in r)n[t]=r[t];return n}m.clone=function(e,r){for(var t in r)"object"==typeof r[t]&&null!==r[t]&&e[t]?this.clone(e[t],r[t]):e[t]=r[t]},m.minMaxNormalize=function(e,r){return{min:Math.min(e,r),max:Math.max(e,r)}},m.randInt=function(e,r,t){var n=m.minMaxNormalize(e,r);return e=n.min,r=n.max,(!0===t?(e=Math.round(e/2),r=Math.round(r/2),2):1)*(Math.floor(Math.random()*(r-e+1))+e)},m.randIntSeed=function(e,r,t){var n=m.minMaxNormalize(e,r);return e=n.min,r=n.max,mul=!0===t?(e=Math.round(e/2),r=Math.round(r/2),2):1,mul*(Math.floor(m.calc.randomseed()*(r-e+1))+e)},m.randReal=function(e,r){var t=m.minMaxNormalize(e,r);return e=t.min,r=t.max,Math.random()*(r-e)+e},m.randRealSeed=function(e,r){var t=m.minMaxNormalize(e,r);return e=t.min,r=t.max,m.calc.randomseed()*(r-e)+e},m.randByArray=function(e,r){return void 0===e||"object"!=typeof e||void 0===e[0]?(m.calc.seed++,e):e=void 0!==r?m.randReal(e[0],e[1]):m.randInt(e[0],e[1])},m.randByArraySeed=function(e,r,t){return null==e||"object"!=typeof e||void 0===e[0]?(m.calc.seed++,e):e=void 0!==r?m.randRealSeed(e[0],e[1]):m.randIntSeed(e[0],e[1],t)},m.randIntByArraySeed=function(e,r,t){return null!=e&&"random"!==e||(e=r),"object"!=typeof e?(m.calc.seed++,e):e=m.randIntSeed(e[0],e[1],t)},m.randRealByArraySeed=function(e,r){return null!=e&&"random"!==e||(e=r),"object"!=typeof e?(m.calc.seed++,e):e=m.randRealSeed(e[0],e[1])},m.randItemSeed=function(e){if("object"!=typeof e||void 0===e[0])return m.calc.seed++,e;var r=e.length;return e[m.randIntSeed(0,r-1)]},m.randItemByArraySeed=function(e,r){if(null!=e&&"random"!==e)return m.calc.seed++,e;var t=r.length;return r[m.randIntSeed(0,t-1)]},m.randProperty=function(e,r){if(null!=e&&"random"!==e)return m.calc.seed++,e;var t=Object.keys(r);return t[m.randByArraySeed([0,t.length-1])]},m.rgba=function(e,r){return"random"!==e&&null!=e||(e=[[0,255],[0,255],[0,255],255]),"randomalpha"===e&&(e=[[0,255],[0,255],[0,255],[128,255]]),void 0!==e[0]&&null!==e[0]||(e[0]=0),void 0!==e[1]&&null!==e[1]||(e[1]=0),void 0!==e[2]&&null!==e[2]||(e[2]=0),void 0!==e[3]&&null!==e[3]||(e[3]=1),e[0]=m.randByArraySeed(e[0]),e[1]=m.randByArraySeed(e[1]),e[2]=m.randByArraySeed(e[2]),e[3]=m.randByArraySeed(e[3]),e[3]%1!=0&&(e[3]=Math.round(255*e[3])),1==e[3]&&(e[3]=255),e};return m.findClosestIndex=function(e,r,t){for(var n=r;0<=n&&n<=e.length-1;n+=t)if(e[n])return n;return e.length-1},m.calc={seed:void 0,pi:3.1415927,luminance:function(e){return.21*e[0]+.72*e[1]+.07*e[2]},randomseed:function(e){void 0===this.seed&&(this.seed=m.randInt(1,Number.MAX_SAFE_INTEGER)),void 0!==e&&(this.seed=e);var r=1e4*Math.sin(this.seed++);return r-Math.floor(r)},normalize1:function(e){return m.calc.normalize(e,0,1)},normalize255:function(e){return m.calc.normalize(e,0,255)},normalize:function(e,r,t){return t<e?t:e<r?r:e},pingpong:function(e,r,t){var n=t-r,a=n+n;return e-=Math.floor(e/a)*a,e=n-Math.abs(e-n)},interpolate:{linear:function(e,r,t){return e*(1-t)+r*t},cosine:function(e,r,t){var n=t*m.calc.pi,a=.5*(1-Math.cos(n));return e*(1-a)+r*a},catmullrom:function(e,r,t,n,a,s){var i=a/s,o=n-t-(e-r),l=o*i*i*i+(e-r-o)*i*i+(t-e)*i+r;return l<0&&(l=0),1<l&&(l=1),l}}},m.colormap={data:null,size:255,init:function(e,r,t){if(this.data=null,this.size=null==r?c:r,null==e||null==e)return e;if("object"==typeof e)if("object"==typeof e[0])for(var n in e){var a=e[n];a.rgba=m.rgba(a.rgba),e[n]=a}else e=m.randItemSeed(e);if("random"===e){var s=m.randIntSeed(1,4);e=[];for(var i=0;i<=s;i++)e[i]={percent:parseInt(i/s*100),rgba:[m.randIntSeed(0,255),m.randIntSeed(0,255),m.randIntSeed(0,255),255]}}var o,l;"function"==typeof t&&t(e),"string"==typeof e&&(o=!1,"!"==e.charAt(0)&&(e=e.substring(1),o=!0),"function"==typeof p.colormaps[e]&&(l=p.colormaps[e](r),this.data=this.render(l,o))),"object"==typeof e&&(this.data=this.render(e))},render:function(e,r){for(var t=[],n=0;n<e.length-1;n++)for(var a=e[n],s=e[n+1],i=Math.round(this.size*(a.percent/100)),o=Math.round(this.size*(s.percent/100)),l=i;l<=o;l++){t[r?this.size-l:l]=[a.rgba[0]+(l-i)/(o-i)*(s.rgba[0]-a.rgba[0]),a.rgba[1]+(l-i)/(o-i)*(s.rgba[1]-a.rgba[1]),a.rgba[2]+(l-i)/(o-i)*(s.rgba[2]-a.rgba[2]),a.rgba[3]+(l-i)/(o-i)*(s.rgba[3]-a.rgba[3])]}return t},get:function(e,r){var t=m.calc.pingpong(parseInt(e),0,this.size),n=this.data[t];return void 0!==r&&(n[3]=r[3]),n}},m.wrapx=function(e){return e&c-1},m.wrapy=function(e){return e&u-1},m.blend=function(e,r,t){return p.blends[e](m,r,t)},m.point={rgba:[],mixed:[],blend:"opacity",colorize:function(e,r,t){return void 0===t&&(t=50),[e[0]-(e[0]-r[0])*(t/100),e[1]-(e[1]-r[1])*(t/100),e[2]-(e[2]-r[2])*(t/100),r[3]?r[3]:255]},opacity:function(e,r){if(255==e[3])return e[3]=r[3],e;if(0==r[3])return r;var t=e[3]/255;return[e[0]*t+r[0]*(1-t),e[1]*t+r[1]*(1-t),e[2]*t+r[2]*(1-t),r[3]]},set:function(e,r){var t=m.texture.get(e,r);switch(void 0!==p.blends[this.blend]?(this.rgba=p.blends[this.blend](m,t,this.rgba),this.mixed=this.opacity(this.rgba,t)):this.mixed=this.rgba,m.normalize){case"clamped":this.mixed[0]=Math.max(0,Math.min(255,this.mixed[0])),this.mixed[1]=Math.max(0,Math.min(255,this.mixed[1])),this.mixed[2]=Math.max(0,Math.min(255,this.mixed[2])),this.mixed[3]=Math.max(0,Math.min(255,this.mixed[3]));break;case"pingpong":this.mixed[0]=m.calc.pingpong(this.mixed[0],0,255),this.mixed[1]=m.calc.pingpong(this.mixed[1],0,255),this.mixed[2]=m.calc.pingpong(this.mixed[2],0,255),this.mixed[3]=m.calc.pingpong(this.mixed[3],0,255)}m.texture.set(e,r,this.mixed)},get:function(e,r){return m.texture.get(e,r)}},m.walk=function(e){for(var r=0;r<c;r++)for(var t=0;t<u;t++){var n=e(n=m.point.get(r,t),r,t);m.point.rgba=n,m.point.set(r,t)}},m.percent=function(e,r){return parseInt(e/100*r,10)},m.percentX=function(e){return parseInt(e/100*c,10)},m.percentY=function(e){return parseInt(e/100*u,10)},m.percentXY=function(e){return parseInt(e/100*t,10)},m.percentRGBA=function(e,r,t){return r[0]=null===r[0]?e[0]:r[0],r[1]=null===r[1]?e[1]:r[1],r[2]=null===r[2]?e[2]:r[2],r[3]=null===r[3]?e[3]:r[3],[Math.round(e[0]+(r[0]-e[0])*t),Math.round(e[1]+(r[1]-e[1])*t),Math.round(e[2]+(r[2]-e[2])*t),Math.round(e[3]+(r[3]-e[3])*t)]},m.xysize=function(e,r){var t,n,a=null!=r.elements?(t=r.elements[e].x,n=r.elements[e].y,r.elements[e].size):(n="random"==r.origin?(t=m.randIntSeed(0,c),m.randIntSeed(0,u)):(t=r.origin[0],r.origin[1]),m.randByArraySeed(r.size));return{x:t,y:n,size:a}},m.toContext=function(e,r){for(var t=e.createImageData(c,u),n=t.data,a=r.length,s=0;s<a;s+=4)n[s]=r[s],n[s+1]=r[s+1],n[s+2]=r[s+2],n[s+3]=r[s+3];return t},m.toCanvas=function(e){null==e&&(e=m.texture.data);var r=document.createElement("canvas");r.width=c,r.height=u;var t=r.getContext("2d"),n=this.toContext(t,e);return t.putImageData(n,0,0),r},m.getCanvas=function(e){return e&&e(this.toCanvas(this.layers[this.layers.length-1])),this},m.getPhases=function(e){if(e){for(var r=[],t=m.layers.length,n=0;n<t;n++)r.push(this.toCanvas(this.layers[n]));e(r)}return this},m.stat=function(e){return r.stop=(new Date).getTime(),r.elapsed=(r.stop-r.start)/1e3,e&&e(r),this},m.history={available:function(){try{return window&&"localStorage"in window&&null!==window.localStorage&&void 0!==window.localStorage}catch(e){return!1}},list:function(){return this.available()&&JSON.parse(window.localStorage.getItem(p.config.historyName))||[]},last:function(){return this.available()?p.config.historyList[p.config.historyList.length-1]:[]},get:function(e){return this.available()?p.config.historyList[e]?p.config.historyList[e]:null:[]},add:function(e){if(p.config.historyLast){if(!this.available())return[];var r=m.params(e);p.config.historyList=JSON.parse(window.localStorage.getItem(p.config.historyName))||[],p.config.historyList.length>=p.config.historyLast&&p.config.historyList.shift(),p.config.historyList.push(r),window.localStorage.setItem(p.config.historyName,JSON.stringify(p.config.historyList))}}},m.params=function(e){var r;return null==e&&(e=(r=new Date).getHours()+":"+r.getMinutes()+":"+r.getSeconds()+" l"+m.layers.length+" i"+l.length),{name:e,version:p.version,width:c,height:u,normalize:m.normalize,items:l}},m.render=function(e,r){this.debug=!0===e.debug,m.event("beforeRender",e);var t,n,a=0,s=0;if(null!=e.width&&(c=e.width),null!=e.height&&(u=e.height),null!=e.normalize?m.normalize=e.normalize:m.normalize="limitless",h(),m.texture=new m.buffer(e.background),1!=r&&m.clear(),e.preset&&e.preset.name){var i=e.preset.name;if("random"===e.preset.name&&(i=m.randItemByArraySeed(null,Object.keys(f.presets))),"object"==typeof e.preset.name&&(i=m.randItemByArraySeed(null,e.preset.name)),i){var o,l=JSON.parse(JSON.stringify(f.presets[i].items));if(e.preset.seed)for(o in l)l[o][2].seed=e.preset.seed;for(o in e.items)l.push(e.items[o]);e.items=l}}for(var d in e.items)a=e.items[d][0],t=e.items[d][1],n=e.items[d][2]?e.items[d][2]:{},null===a&&(a="copy"===t?s+1:s),e.seed&&(n.seed=e.seed*d),"random"==t&&(t=m.randProperty(m.defaults)),"object"==typeof t&&(t=m.randItemSeed(t)),s!=a&&(null!=m.layers[a]?m.texture.data=m.layers[a]:m.texture.clear(),s=a),null!=m[t]?m[t](n):null!=p.effects[t]?m.do(t,n,a):console.warn("undefined effect: "+t),m.layers[a]=m.texture.export();return m.event("afterRender",m.params()),m.history.add(),this},m.event=function(e,r){for(var t in p.events[e]){var n=p.events[e][t];"function"==typeof n&&n(m,r)}},m.do=function(e,r,t){var n,a,s,i,o=r;return void 0===r?r=d({},p.defaults[e]):"object"==typeof r&&(r=d(p.defaults[e],r)),r.seed=void 0!==r.seed&&null!==r.seed?r.seed:[1,Number.MAX_SAFE_INTEGER],r.seed=m.randByArray(r.seed),m.calc.randomseed(r.seed),(n=r).count=m.randByArraySeed(n.count),n.level=m.randByArraySeed(n.level),n.opacity=m.randByArraySeed(n.opacity),void 0!==n.blend?(n.blend=m.randProperty(n.blend,p.blends),n.blend=m.randItemSeed(n.blend),m.point.blend=n.blend):m.point.blend="",n.rgba=m.rgba(n.rgb?n.rgb:n.rgba),n.rgba&&(m.point.rgba=[n.rgba[0],n.rgba[1],n.rgba[2],n.rgba[3]]),Object.keys(n).forEach(function(e){void 0===n[e]&&delete n[e]}),r=n,m.event("beforeEffect",{layer:t,name:e,params:r}),"function"==typeof p.effects[e]?r=p.effects[e](m,r):console.warn("effect not callable: "+e),void 0===r&&(r=o),m.event("afterEffect",{layer:t,name:e,params:r}),r&&!1!==r.store&&(a=t,s=e,i=r,l.push([a,s,i])),m},m}}(SeamlessTextureGenerator),function(e){e.shape("rect",function(e,r,t,n,a,s){void 0!==s&&(r-=parseInt(n/2,10),t-=parseInt(a/2,10));for(var i=0;i<n;i++)for(var o=0;o<a;o++)e.point.set(r+i,t+o)}),e.shape("circle",function(e,r,t,n,a){null==a&&(r+=n,t+=n);for(var s=-n;s<n;s++)for(var i=Math.round(Math.sqrt(n*n-s*s)),o=-i;o<i;o++)e.point.set(r+s,t+o)}),e.shape("line",function(e,r,t,n,a){for(var s,i,o=Math.sqrt((n-r)*(n-r)+(a-t)*(a-t)),l=(n-r)/o,d=(a-t)/o,c=0;c<o;c++)s=r+l*c,i=t+d*c,e.point.set(s,i)}),e.shape("colorLine",function(e,r,t,n,a,s){for(var i,o,l,d,c=Math.sqrt((n-r)*(n-r)+(a-t)*(a-t)),u=(n-r)/c,h=(a-t)/c,p=s.length,m=0;m<c;m++)for(i=r+u*m,o=t+h*m,l=parseInt(p*(m/c)),e.point.rgba=s[l],d=1;d<=7;d++)e.point.set(i-d,o+d)}),e.shape("sphere",function(e,r,t,n,a,s,i){var o,l,d,c,u;for(null==a&&(r+=n,t+=n),c=-n;c<n;c++)for(u=-(d=parseInt(Math.sqrt(n*n-c*c),10));u<d;u++)0<(o=Math.min(255,Math.max(0,255-255*Math.sqrt(u*u+c*c)/(n/2)))/255)&&(l=i?255*o:s[3],e.point.rgba=[s[0]*o,s[1]*o,s[2]*o,l],e.point.set(r+c,t+u))}),e.shape("pyramid",function(e,r,t,n,a,s,i,o){var l,d,c,u,h=parseInt(n/2,10),p=parseInt(a/2,10);for(1!=s&&(r+=h,t+=p),c=-h;c<h;c++)for(u=-p;u<p;u++)1<(l=255*(.25-Math.abs(c/n))+255*(.25-Math.abs(u/a)))&&(d=o?l:i[3],e.point.rgba=[i[0]/255*l,i[1]/255*l,i[2]/255*l,d],e.point.set(r+c,t+u))})}(SeamlessTextureGenerator),function(e){e.effect("test-pattern",{},function(e,r){var t=e.texture.width,n=e.texture.height;return e.point.blend="opacity",e.texture.clear(),e.point.rgba=[255,255,155,255],e.shape.rect(e,1,1,t-2,n-2),e.point.rgba=[0,150,0,153],e.shape.rect(e,2,2,20,20),e.shape.rect(e,t-20-2,2,20,20),e.shape.rect(e,2,n-2-20,20,20),e.shape.rect(e,t-2-20,n-2-20,20,20),e.point.rgba=[20,20,10,51],e.shape.rect(e,t/2,n/2,178,178,!0),e.point.rgba=[10,20,210,178],e.shape.rect(e,t-5,n-5,10,10),e.point.rgba=[10,10,210,250],e.shape.line(e,20,20,t-20,n-20),e.shape.line(e,t-20,20,20,n-20),e.shape.line(e,0,n/2,t,n/2),e.shape.line(e,t/2,0,t/2,n),e.point.rgba=[255,55,55,128],e.shape.rect(e,10,10,t-20,n-20),e.point.rgba=[0,0,255,76],e.shape.rect(e,t-2,n-2,4,4),e.point.rgba=[255,255,255,255],e.point.set(0,0),e.point.set(t-1,0),e.point.set(0,n-1),e.point.set(t-1,n-1),e.point.rgba=[25,25,0,51],e.shape.circle(e,t/4,n/4,t/4,!0),e.point.rgba=[255,255,0,25],e.shape.circle(e,t,n,t,!0),e.shape.sphere(e,t/4,n-n/4,t/2,!0,[255,0,0,0],!0),e.shape.sphere(e,t/2,n-n/4,t/2,!0,[0,255,0,0],!0),e.shape.sphere(e,t-t/4,n-n/4,t/2,!0,[255,255,255,0],!0),e.shape.pyramid(e,t-t/4,n/4,t/2,n/2,!0,[0,0,0,255],!0),e.do("brightness",{adjust:50}),e.do("vibrance",{adjust:100}),e.do("contrast",{adjust:20}),r}),e.effect("test-all",{},function(e,r){var t;e.normalize="limitless";var n=0,a=["test-all","test-pattern","copy","merge","mergeall"];for(var s in e.effects)t=e.effects[s],a.indexOf(t)<0&&(e.do(t),e.layers[n++]=e.texture.export());return r})}(SeamlessTextureGenerator);